 we are now going to use the github api to pull these issues in this format:                                


 # input

 c:\Projects\github-library\data\repos\shopify_stripe_filter3.csv


this is a list of github repos
 # method

## Script to use: 
Create new script: `scripts/collect_issues_to_markdown.py`

## Implementation approach:

1. **Read input CSV**: 
   - Load `data/repos/shopify_stripe_filter3.csv`
   - Extract org_name, repo_name, and issue number from hyperlink column

2. **For each issue in CSV**:
   - Use `GitHubClient` from `scripts/github_client/client.py` for API calls
   - Fetch full issue details via `/repos/{owner}/{repo}/issues/{issue_number}` 
   - Fetch all comments via `/repos/{owner}/{repo}/issues/{issue_number}/comments`
   - Calculate repo's 30-day PR merge rate using `MergedPRsFetcher` from `scripts/merged_prs_30d/fetch_merged_prs.py`

3. **Create output directory structure**:
   - Check/create: `data/issues/{year_2digit}/{month_2digit}/`
   - Generate filename: `{day}_{org_first3}_{repo_first10}_{title_first15}.md`
   - Sanitize filename (remove special chars, spaces → underscores)

4. **Components to reuse**:
   - Authentication: Use existing `.env` API_GITHUB_TOKEN
   - Rate limiting: Adapt retry logic from `scripts/merged_prs_30d/fetch_merged_prs.py`
   - API client: Extend `GitHubClient` class with new methods:
     - `get_issue_details(owner, repo, issue_number)`
     - `get_issue_comments(owner, repo, issue_number)`
   
5. **Error handling**:
   - Skip if issue not found (404)
   - Continue processing even if some issues fail
   - Log all errors to console
   - Handle rate limiting with exponential backoff

 # output file structure

## Directory structure:
```
data/issues/
├── 25/                           # Year (2025)
│   └── 08/                       # Month (August)
│       ├── 13_str_stripe-ruby_add-additional-h.md
│       ├── 12_sho_flash-list_v2-invalid-attr.md
│       ├── 12_sho_flash-list_still-have-bla.md
│       ├── 12_sho_flash-list_jest-mock-retu.md
│       ├── 11_str_stripe-go_metadata-field-.md
│       ├── 11_sho_cli_bug-shopify-app.md
│       ├── 11_str_pg-schema-d_bump-everything.md
│       ├── 09_sho_cli_bug-codespaces.md
│       └── 08_str_stripe-reac_stripe-sdk-con.md
```

## File naming convention:
`{DD}_{ORG}_{REPO}_{TITLE}.md`

Where:
- `{DD}`: 2-digit day from opened_date (e.g., "13" for 2025-08-13)
- `{ORG}`: First 3 characters of org_name (e.g., "str" for stripe, "sho" for shopify)
- `{REPO}`: First 10 characters of repo_name, truncated if longer (e.g., "stripe-rub" for stripe-ruby, "pg-schema-" for pg-schema-diff)
- `{TITLE}`: First 15 characters of issue_title, sanitized (spaces→hyphens, special chars removed, lowercase)

## Examples from actual input data (309 issues total):
- `data/issues/25/08/13_str_stripe-rub_add-additional-.md` (stripe/stripe-ruby: "Add additional headers on request")
- `data/issues/25/08/12_sho_flash-list_v2-invalid-attr.md` (shopify/flash-list: "V2: Invalid attribute disableRecycling")
- `data/issues/25/08/11_sho_cli_bug-shopify-app.md` (shopify/cli: "[Bug]: shopify app dev --reset HTTP 500 error")
- `data/issues/25/07/30_str_stripe-nod_webhook-signing.md` (stripe/stripe-node: issue from July)
- `data/issues/25/06/15_sho_hydrogen_fix-hydration-e.md` (shopify/hydrogen: issue from June)

## Important notes:
- Process ALL 309 issues from the CSV input file
- Create year/month directories as needed (issues span multiple months)
- If multiple issues have same date/org/repo/title pattern, append "_2", "_3" etc.
- Sanitize filenames: remove/replace chars like `:[]()?,` with hyphens or underscores
- Truncate long titles at 15 chars, ensuring no partial words

# output detail

issue title:
labels: 
comment count:
hyperlink:
status: (should be open, if closed something wrong but keep anyway)
date opened:
repo 30d_merge_rate: (helps understand PR velocity--  there is a script for this already to adapt)

====

description:


===

comment #1 by {{author}}, {{date}}, {{time}}

comment #2 by {{author}}, {{date}}, {{time}} 

etc.